{"ast":null,"code":"import _classCallCheck from\"/Users/Gun/workspace/ScienceReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Gun/workspace/ScienceReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Gun/workspace/ScienceReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Gun/workspace/ScienceReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,useContext}from\"react\";import{Redirect,Route}from\"react-router-dom\";import firebaseConfig from\"../config\";import{AuthContext}from\"./Auth\";import Header from\"./Header\";import LogIn from\"./Login\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var db=firebaseConfig.firestore();var Create=/*#__PURE__*/function(_Component){_inherits(Create,_Component);var _super=_createSuper(Create);function Create(props){var _this;_classCallCheck(this,Create);_this=_super.call(this,props);_this.renderRedirect=function(){if(_this.state.redirect){return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}};_this.state={User:[],alert:false,alertData:{},redirect:false};return _this;}_createClass(Create,[{key:\"showAlert\",value:function showAlert(type,message){var _this2=this;this.setState({alert:true,alertData:{type:type,message:message}});setTimeout(function(){_this2.setState({alert:false});},4000);}},{key:\"resetForm\",value:function resetForm(){this.refs.contactForm.reset();}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;db.collection(\"User\").get().then(function(snapshot){var User=[];snapshot.forEach(function(doc){var data=doc.data();User.push(data);});_this3.setState({User:User});});}},{key:\"sendMessage\",value:function sendMessage(e){var _this4=this;e.preventDefault();var user=firebaseConfig.auth().currentUser;if(!user){this.setState({redirect:true});}else{var params={name:this.inputName.value,email:user.email,type:this.inputType.value,fund:this.inputFund.value,message:this.textAreaMessage.value};if(params.name&&params.email&&params.type&&params.fund&&params.message){db.collection(\"User\").add(params).then(function(){_this4.showAlert(\"success\",\"Your message was sent successfull\");}).catch(function(){_this4.showAlert(\"danger\",\"Your message could not be sent\");});this.resetForm();}else{this.showAlert(\"warning\",\"Please fill the form\");}}}},{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),this.renderRedirect(),this.state.alert&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-\".concat(this.state.alertData.type),role:\"alert\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:this.state.alertData.message})}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{padding:\"40px 15px 0px 15px\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Project\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.sendMessage.bind(this),ref:\"contactForm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",placeholder:\"Name\",ref:function ref(name){return _this5.inputName=name;}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"type\",children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",id:\"type\",ref:function ref(type){return _this5.inputType=type;},children:[/*#__PURE__*/_jsx(\"option\",{value:\"Tech\",children:\"Tech\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Science\",children:\"Science\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Community\",children:\"Community\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fund\",children:\"Fund\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"fund\",placeholder:\"3000 THB\",ref:function ref(fund){return _this5.inputFund=fund;}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"message\",children:\"Message\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"message\",rows:\"3\",style:{margin:\"0px 0px 10px 0px\"},ref:function ref(message){return _this5.textAreaMessage=message;}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",style:{margin:\"0px 0px 10px 0px\"},onClick:this.handleSubmit,children:\"Send\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:this.state.User.map(function(User){return/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",style:{margin:\"0px 0px 30px 0px\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:User.name}),/*#__PURE__*/_jsx(\"h6\",{className:\"card-subtitle mb-2 text-muted\",children:User.type}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:User.message}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:User.fund}),/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(User.email),className:\"card-link\",children:User.email})]})})},User.fund);})})})]})})]});}}]);return Create;}(Component);export default Create;","map":{"version":3,"sources":["/Users/Gun/workspace/ScienceReact/src/components/createproject.js"],"names":["React","Component","useContext","Redirect","Route","firebaseConfig","AuthContext","Header","LogIn","db","firestore","Create","props","renderRedirect","state","redirect","User","alert","alertData","type","message","setState","setTimeout","refs","contactForm","reset","collection","get","then","snapshot","forEach","doc","data","push","e","preventDefault","user","auth","currentUser","params","name","inputName","value","email","inputType","fund","inputFund","textAreaMessage","add","showAlert","catch","resetForm","padding","sendMessage","bind","margin","handleSubmit","map"],"mappings":"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","sourcesContent":["import React, { Component, useContext } from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport firebaseConfig from \"../config\";\nimport { AuthContext } from \"./Auth\";\nimport Header from \"./Header\";\nimport LogIn from \"./Login\";\n\nvar db = firebaseConfig.firestore();\n\nclass Create extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      User: [],\n      alert: false,\n      alertData: {},\n      redirect: false,\n    };\n  }\n\n  showAlert(type, message) {\n    this.setState({\n      alert: true,\n      alertData: { type, message },\n    });\n    setTimeout(() => {\n      this.setState({ alert: false });\n    }, 4000);\n  }\n\n  resetForm() {\n    this.refs.contactForm.reset();\n  }\n\n  componentDidMount() {\n    db.collection(\"User\")\n      .get()\n      .then((snapshot) => {\n        const User = [];\n        snapshot.forEach((doc) => {\n          const data = doc.data();\n          User.push(data);\n        });\n        this.setState({ User: User });\n      });\n  }\n\n  sendMessage(e) {\n    e.preventDefault();\n    let user = firebaseConfig.auth().currentUser;\n    if (!user) {\n      this.setState({\n        redirect: true,\n      });\n    } else {\n      const params = {\n        name: this.inputName.value,\n        email: user.email,\n        type: this.inputType.value,\n        fund: this.inputFund.value,\n        message: this.textAreaMessage.value,\n      };\n      if (\n        params.name &&\n        params.email &&\n        params.type &&\n        params.fund &&\n        params.message\n      ) {\n        db.collection(\"User\")\n          .add(params)\n          .then(() => {\n            this.showAlert(\"success\", \"Your message was sent successfull\");\n          })\n          .catch(() => {\n            this.showAlert(\"danger\", \"Your message could not be sent\");\n          });\n        this.resetForm();\n      } else {\n        this.showAlert(\"warning\", \"Please fill the form\");\n      }\n    }\n  }\n\n  renderRedirect = () => {\n    if (this.state.redirect) {\n      return <Redirect to=\"/login\" />;\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <Header />\n        {this.renderRedirect()}\n        {this.state.alert && (\n          <div\n            className={`alert alert-${this.state.alertData.type}`}\n            role=\"alert\"\n          >\n            <div className=\"container\">{this.state.alertData.message}</div>\n          </div>\n        )}\n        <div className=\"container\" style={{ padding: `40px 15px 0px 15px` }}>\n          <div className=\"row\">\n            <div className=\"col-sm-4\">\n              <h2>Project</h2>\n              <form onSubmit={this.sendMessage.bind(this)} ref=\"contactForm\">\n                <div className=\"form-group\">\n                  <label htmlFor=\"name\">Name</label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    id=\"name\"\n                    placeholder=\"Name\"\n                    ref={(name) => (this.inputName = name)}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"type\">Type</label>\n                  <select\n                    className=\"form-control\"\n                    id=\"type\"\n                    ref={(type) => (this.inputType = type)}\n                  >\n                    <option value=\"Tech\">Tech</option>\n                    <option value=\"Science\">Science</option>\n                    <option value=\"Community\">Community</option>\n                  </select>\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"fund\">Fund</label>\n                  <input\n                    type=\"number\"\n                    className=\"form-control\"\n                    id=\"fund\"\n                    placeholder=\"3000 THB\"\n                    ref={(fund) => (this.inputFund = fund)}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"message\">Message</label>\n                  <textarea\n                    className=\"form-control\"\n                    id=\"message\"\n                    rows=\"3\"\n                    style={{ margin: `0px 0px 10px 0px` }}\n                    ref={(message) => (this.textAreaMessage = message)}\n                  ></textarea>\n                </div>\n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary\"\n                  style={{ margin: `0px 0px 10px 0px` }}\n                  onClick={this.handleSubmit}\n                >\n                  Send\n                </button>\n              </form>\n            </div>\n            <div className=\"col-sm-8\">\n              <div className=\"row\">\n                {this.state.User.map((User) => (\n                  <div\n                    className=\"col-sm-6\"\n                    key={User.fund}\n                    style={{ margin: `0px 0px 30px 0px` }}\n                  >\n                    <div className=\"card\">\n                      <div className=\"card-body\">\n                        <h4 className=\"card-title\">{User.name}</h4>\n                        <h6 className=\"card-subtitle mb-2 text-muted\">\n                          {User.type}\n                        </h6>\n                        <p className=\"card-text\">{User.message}</p>\n                        <p className=\"card-text\">{User.fund}</p>\n                        <a href={`mailto:${User.email}`} className=\"card-link\">\n                          {User.email}\n                        </a>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Create;\n"]},"metadata":{},"sourceType":"module"}